import{j as L,r as c,R as j,a as D}from"./vendor.8305dc8c.js";const G=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=r(t);fetch(t.href,a)}};G();function k(e){let n;return e.forEach(r=>{!n&&r.every(s=>s===r[0])&&(n=r[0])}),n}function X(e){const n=e.length-1;return e.reduce((r,s,t,a)=>{const l=[];for(let h=0;h<=n;h+=1)l.push(a[h][t]);return r.concat([l])},[])}function B(e){const n=e.length-1,r=[],s=[];for(let t=0;t<=n;t+=1)r.push(e[t][t]),s.push(e[t][n-t]);return[r,s]}function F(e){return k(e)}function U(e){return k(X(e))}function _(e){return k(B(e))}function z(e){return F(e)||U(e)||_(e)}function H(e){return e.every(n=>n.every(r=>r!==""))}function q(e){const n=z(e),r=n?!1:H(e);return[n,r]}function K(){const e=65,n=90,r=[];for(let s=e;s<=n;s+=1)r.push(String.fromCodePoint(s));return r}const o=L.exports.jsx,i=L.exports.jsxs,A=L.exports.Fragment;function V({onClick:e,value:n,id:r}){return o("button",{className:"cell",id:r,onClick:()=>e?e(r):null,disabled:n!=="",children:n})}function Y({handleClick:e,table:n,tableIndexesMap:r}){return o("div",{className:"table",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:r.map(s=>{const[t,a]=s.split(""),l=n[t][a];return o(V,{onClick:e,id:s,value:l},s)})})}function Z(){return i("div",{className:"indicator",children:["It's a ",o("span",{children:"draw!"})," No one won!"]})}function J({player:e}){return i("div",{className:"indicator",children:["It's player's ",o("span",{children:e})," turn!"]})}function Q({winner:e}){return i("div",{className:"indicator",children:["Player ",o("span",{children:e})," has won this game!"]})}function W({onClick:e}){return o("button",{className:"restart-button",onClick:e,children:"Restart"})}function ee({tableSize:e,players:n,restartGame:r}){const[s,t]=c.exports.useState(!1),[a,l]=c.exports.useState(!1),[h,f]=c.exports.useState(void 0),[v,g]=c.exports.useState("X"),[u,w]=c.exports.useState(1),[C,m]=c.exports.useState("X (Player 1)"),[p,x]=c.exports.useState([]),[d,y]=c.exports.useState([]);c.exports.useEffect(()=>{const b=Array(e);for(let S=0;S<e;S+=1)b[S]=Array(e).fill("");y(b)},[e]),c.exports.useEffect(()=>{const b=d.flatMap((S,T)=>S.map(($,N)=>`${T}${N}`));x(b)},[d]),c.exports.useEffect(()=>{const b=n.find(({id:S})=>S===u);g(b.symbol),m(`${b.symbol} (${b.name})`)},[u]);function P(b){const[S,T]=b.split(""),$=[...d];$[S][T]=v,y($);const[N,O]=q(d);if(O&&l(!0),N){const I=n.find(({symbol:E})=>E===N);f(`${I.symbol} (${I.name})`),t(!0)}if(!s&&!a){const I=u%n.length,E=n[I];w(E.id)}}return i("div",{className:"game",children:[!s&&!a&&o(J,{player:C}),o(Y,{handleClick:s?null:P,table:d,tableIndexesMap:p}),s&&i(A,{children:[o(Q,{winner:h}),o(W,{onClick:()=>r(e,h,n)})]}),a&&i(A,{children:[o(Z,{}),o(W,{onClick:()=>r(e,h,n)})]})]})}function ne({winner:e}){return i("div",{className:"indicator",children:["Last winner was ",o("span",{children:e}),"!"]})}const M=K(),R=new Set;R.add("X");R.add("O");const te=({addPlayer:e,removePlayer:n,changePlayers:r,players:s})=>{const[t,a]=c.exports.useState(M),[l,h]=c.exports.useState(R);return c.exports.useEffect(()=>{a(M.filter(f=>!l.has(f)))},[l]),c.exports.useEffect(()=>{const f=new Set;s.forEach(({symbol:v})=>f.add(v)),h(f)},[s.length]),i("div",{className:"selector",children:["Players:",s.map(({id:f,name:v,symbol:g})=>i("div",{className:"player",children:[i("label",{children:[o("input",{onChange:({target:{value:u}})=>r({id:f,name:u}),type:"text",value:v}),i("select",{defaultValue:g,onChange:({target:{value:u}})=>{const w=new Set(l);w.delete(g),w.add(u),h(w),r({id:f,symbol:u})},children:[o("option",{value:g,children:g}),t.map(u=>o("option",{value:u,children:u},u))]})]}),o("button",{className:"menu-button",disabled:s.length===2,onClick:()=>n(f),children:"Remove Player"})]},f)),o("button",{className:"menu-button",disabled:s.length===26,onClick:()=>e(),children:"Add Player"})]})},re=({changeTableSize:e})=>i("label",{className:"selector",children:["Table size:",i("select",{onChange:e,name:"table-size",id:"table-size",children:[o("option",{value:"3",children:"3x3"}),o("option",{value:"4",children:"4x4"}),o("option",{value:"5",children:"5x5"})]})]});const se=({startGame:e,changeTableSize:n,addPlayer:r,removePlayer:s,changePlayers:t,players:a})=>i("div",{className:"menu",children:[o(te,{addPlayer:r,removePlayer:s,changePlayers:t,players:a}),o(re,{changeTableSize:n}),o("button",{className:"menu-button",onClick:()=>e(),children:"Start Game"})]}),oe=[{id:1,name:"Player 1",symbol:"X"},{id:2,name:"Player 2",symbol:"O"}];function ae(){const[e,n]=c.exports.useState(oe),[r,s]=c.exports.useState(3),[t,a]=c.exports.useState(!1),[l,h]=c.exports.useState(void 0);function f(m,p,x){n(x),s(m),h(p),a(!1)}function v({target:{value:m}}){s(Number(m))}function g(){var y;const m=((y=e.at(-1))==null?void 0:y.id)+1||1;let p=65;for(;e.find(({symbol:P})=>P===String.fromCodePoint(p));)p+=1;const x={id:m,name:`Player ${m}`,symbol:String.fromCodePoint(p)},d=[...e];d.push(x),d.forEach((P,b)=>P.id=b+1),n(d)}function u(m){const p=e.filter(({id:x})=>x!==m);p.forEach((x,d)=>x.id=d+1),n(p)}function w({id:m,name:p,symbol:x}){const d=e.map(y=>m===y.id?{id:m,name:p||y.name,symbol:x||y.symbol}:y);d.forEach((y,P)=>y.id=P+1),n(d)}function C(){a(!0)}return o("div",{className:"App",children:t?o(ee,{tableSize:r,players:e,restartGame:f}):i(A,{children:[l&&o(ne,{winner:l}),o(se,{changeTableSize:v,changePlayers:w,players:e,startGame:C,addPlayer:g,removePlayer:u})]})})}j.render(o(D.StrictMode,{children:o(ae,{})}),document.getElementById("root"));
